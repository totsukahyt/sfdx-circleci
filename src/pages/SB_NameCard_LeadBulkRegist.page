<!--
/*
 * (c) 2016 Sunbridge Inc.
 *
 * リードに一括登録
 */
-->
<apex:page standardController="SmartViscaf__NameCard__c" recordSetVar="nameCardList" extensions="SB_NameCard_LeadBulkRegistController" title="{!$Label.SB_NCLD_Text_BusinessCard}: {!registerToLeadLabel}" tabStyle="SmartViscaf__NameCard__c" showHeader="true" sidebar="false">
  <apex:pageMessages id="pageMsgs" escape="false"/>

  <apex:form >
    <apex:pageBlock title="{!registerToLeadLabel}">
      <apex:pageBlockButtons >
        <apex:commandButton action="{!save}" value="{!$Label.SB_NCLD_Label_Save}" rerender="pageMsgs, ncRecList"/>
        <apex:commandButton action="{!cancel}" value="{!$Label.SB_NCLD_Label_Cancel}" immediate="true"/>
      </apex:pageBlockButtons>
      <apex:pageBlockSection columns="2">

        <apex:selectRadio label="{!$Label.SB_NC_SearchCriteria}" value="{!searchType}">
          <apex:selectOptions value="{!searchTypeList}"/>
          <apex:actionSupport event="onclick" action="{!search}" rerender="pageMsgs, ncRecList"/>
        </apex:selectRadio>

        <apex:outputPanel >
          <apex:inputCheckbox value="{!leadOverwrite}"/>
          <apex:outputLabel value="{!overwriteLeadInfoLabel}"/>
        </apex:outputPanel>
      </apex:pageBlockSection>

      <apex:pageBlockTable id="ncRecList" value="{!nameCardRecordList}" var="ncRec">
        <apex:column rendered="{!hasError}">
          <apex:facet name="header"></apex:facet>
          <apex:image value="/img/msg_icons/error16.png" rendered="{!ncRec.hasError}"/>
        </apex:column>

        <apex:column >
          <apex:facet name="header">{!$Label.SB_NCLD_Label_Name}</apex:facet>
          <apex:outputPanel layout="none">
            <a href="/{!ncRec.nameCard.Id}" id="ncNm_{!ncRec.nameCard.Id}" onblur="LookupHoverDetail.getHover('ncNm_{!ncRec.nameCard.Id}').hide();" onfocus="LookupHoverDetail.getHover('ncNm_{!ncRec.nameCard.Id}', '/{!ncRec.nameCard.Id}/m?isAjaxRequest=1').show();" onmouseout="LookupHoverDetail.getHover('ncNm_{!ncRec.nameCard.Id}').hide();" onmouseover="LookupHoverDetail.getHover('ncNm_{!ncRec.nameCard.Id}', '/{!ncRec.nameCard.Id}/m?isAjaxRequest=1').show();">
              <apex:outputText value="{!ncRec.nameCard.Name}"/>
            </a>
          </apex:outputPanel>
        </apex:column>

        <apex:column >
          <apex:facet name="header">{!$Label.SB_NCLD_Label_Email}</apex:facet>
          <apex:outputText value="{!ncRec.nameCard.SmartViscaf__email__c}"/>
        </apex:column>

        <apex:column >
          <apex:facet name="header">{!$Label.SB_NCLD_Label_CompanyName}</apex:facet>
          <apex:outputText value="{!ncRec.nameCard.SmartViscaf__company_name__c}"/>
        </apex:column>

        <apex:column >
          <apex:facet name="header">{!$Label.SB_NCLD_Label_Prefectures}</apex:facet>
          <apex:outputText value="{!ncRec.nameCard.SmartViscaf__address_pref__c}"/>
        </apex:column>

        <apex:column >
          <apex:facet name="header">{!$Label.SB_NCLD_Label_Division}</apex:facet>
          <apex:outputText value="{!ncRec.nameCard.SmartViscaf__division__c}"/>
        </apex:column>

        <apex:column >
          <apex:facet name="header">{!$Label.SB_NCLD_Label_Position}</apex:facet>
          <apex:outputText value="{!ncRec.nameCard.SmartViscaf__title_name__c}"/>
        </apex:column>

        <apex:column >
          <apex:facet name="header">{!$Label.SB_NCLD_Text_Lead}</apex:facet>
          <apex:selectList value="{!ncRec.leadId}" size="1">
            <apex:selectOptions value="{!ncRec.leadSelOptList}"/>
          </apex:selectList>
        </apex:column>

        <apex:column >
          <apex:facet name="header">{!$Label.SB_NCLD_Label_ToDoRegistration}</apex:facet>
          <apex:inputCheckbox value="{!ncRec.registTodo}"/>
        </apex:column>
      </apex:pageBlockTable>

      <apex:pageBlockSection rendered="{!leadCreateable}"  title="{!specifiedWhenCreateNew}" columns="1">
        <apex:pageBlockSectionItem >
          <apex:outputLabel value="{!$Label.SB_NCLD_Label_Campaign}"/>
          <apex:inputField value="{!insertOption.campaign__c}"/>
        </apex:pageBlockSectionItem>

        <apex:pageBlockSectionItem >
          <apex:outputLabel value="{!$Label.SB_NCLD_Label_Owner}"/>
          <apex:inputField value="{!ownerlead.OwnerId}" required="false"/>
        </apex:pageBlockSectionItem>
      </apex:pageBlockSection>
    </apex:pageBlock>
  </apex:form>
</apex:page>